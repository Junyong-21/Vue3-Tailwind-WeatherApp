import{u as C,w as h,o as i,g as b,h as m,a as e,i as r,c as d,t as l,e as H,n as p,F as y,b as v,S as g,d as n}from"./index-e5134283.js";import{a as x,A as u}from"./AnimatedPlaceholder-bf01c4c6.js";const N={class:"flex flex-col flex-1 items-center"},V={key:0,class:"text-white p-4 bg-weather-secondary w-full text-center"},B={class:"flex flex-col items-center text-white py-12"},T={class:"text-4xl mb-2"},W={class:"text-sm mb-12"},z={class:"text-8xl mb-8"},A={class:"text-center text-2xl"},L={class:"capitalize"},M={class:"w-[150px] h-auto text-8xl my-5"},j=e("hr",{class:"border-white border-opacity-10 border w-full"},null,-1),F={class:"max-w-screen-md w-full py-12"},I={class:"mx-8 text-white"},J=e("h2",{class:"mb-4"},"逐小时天气预报",-1),O={class:"flex gap-10 overflow-x-scroll"},P={class:"whitespace-nowrap text-md"},E={class:"w-auto h-[50px] object-cove text-2xl"},G={class:"pb-4 text-xl",style:{"user-select":"none"}},K=e("hr",{class:"border-white border-opacity-10 border w-full"},null,-1),Q={class:"max-w-screen-md w-full py-12"},U={class:"mx-8 text-white"},X=e("h2",{class:"mb-4"}," 每日天气预报 ",-1),Y={class:"flex-1"},Z={class:"w-[55px] h-[50px]"},ee={class:"flex gap-2 flex-1 justify-end"},te=e("i",{class:"fa-solid fa-trash"},null,-1),se=e("p",null,"删除城市",-1),ae=[te,se],ce={__name:"asyncWeather",async setup(w){let t,o;const s=C(),$=async()=>{try{return(await x.get(`https://devapi.qweather.com/v7/weather/now?location=${s.currentRoute.value.query.lon},${s.currentRoute.value.query.lat}&key=c64bebdc3d8047d29bb483594207ce62`)).data}catch(a){console.log(a)}},_=([t,o]=h(()=>$()),t=await t,o(),t),q=async()=>{try{return(await x.get(`https://devapi.qweather.com/v7/weather/24h?location=${s.currentRoute.value.query.lon},${s.currentRoute.value.query.lat}&key=c64bebdc3d8047d29bb483594207ce62`)).data}catch(a){console.log(a)}},k=([t,o]=h(()=>q()),t=await t,o(),t),R=async()=>{try{return(await x.get(`https://devapi.qweather.com/v7/weather/7d?location=${s.currentRoute.value.query.lon},${s.currentRoute.value.query.lat}&key=c64bebdc3d8047d29bb483594207ce62`)).data}catch(a){console.log(a)}},S=([t,o]=h(()=>R()),t=await t,o(),t);[t,o]=h(()=>new Promise(a=>{setTimeout(a,1e3)})),await t,o();const D=()=>{const f=JSON.parse(localStorage.getItem("savedCities")).filter(c=>c.id!==s.currentRoute.value.query.id);localStorage.setItem("savedCities",JSON.stringify(f)),s.push({name:"home"})};return(a,f)=>(i(),b(g,null,{default:m(()=>[e("div",N,[r(s).currentRoute.value.query.preview?(i(),d("div",V,[e("p",null,"你正在预览城市："+l(r(s).currentRoute.value.params.city)+"，点击 “ + ”号开始追踪这个城市",1)])):H("",!0),e("div",B,[e("h1",T,l(r(s).currentRoute.value.params.city)+" "+l(r(s).currentRoute.value.params.state),1),e("p",W,"数据观测时间: "+l(new Date(r(_).now.obsTime).toLocaleTimeString("cn-zh",{weekday:"short",day:"2-digit",month:"long"})),1),e("p",z,l(Math.round(r(_).now.temp))+"℃ ",1),e("div",A,[e("p",L,l(r(_).now.text),1),e("p",M,[e("i",{class:p(`qi-${r(_).now.icon}`)},null,2)])])]),j,e("div",F,[e("div",I,[J,e("div",O,[(i(!0),d(y,null,v(r(k).hourly,c=>(i(),d("div",{key:c.id,class:"flex flex-col gap-4 items-center"},[e("p",P,l(c.fxTime.substring(11,16)),1),e("p",E,[e("i",{class:p(`qi-${c.icon}`)},null,2)]),e("p",G,l(c.temp)+"℃ ",1)]))),128))])])]),K,e("div",Q,[e("div",U,[X,(i(!0),d(y,null,v(r(S).daily,c=>(i(),d("div",{key:c.id,class:"flex items-center"},[e("p",Y,l(c.fxDate.substring(5)),1),e("p",Z,[e("i",{class:p([`qi-${c.iconDay}`,"pr-4"])},null,2)]),e("div",ee,[e("p",null,"H: "+l(c.tempMax.padStart(2,"0"))+" ℃",1),e("p",null,"L: "+l(c.tempMin.padStart(2,"0"))+" ℃",1)])]))),128))])]),e("div",{class:"flex items-center gap-2 py-12 text-white cursor-pointer duration-150 hover::text-red-500",onClick:D},ae)])]),_:1}))}},le={class:"flex flex-col flex-1"},oe={class:"flex flex-col py-12 items-center"},re={class:"flex flex-col py-12 px-8 items-center"},ne={class:"flex flex-col py-12 px-8 items-center"},ie={__name:"cityViewSkaeleton",setup(w){return(t,o)=>(i(),d("div",le,[e("div",oe,[n(u,{class:"max-w-[300px] w-full mb-2"}),n(u,{class:"max-w-[300px] w-full mb-12"}),n(u,{class:"max-w-[300px] h-[100px] w-full mb-12"}),n(u,{class:"max-w-[300px] w-full mb-8"}),n(u,{class:"max-w-[300px] h-[75px] w-full"})]),e("div",re,[n(u,{class:"max-w-screen-md h-[100px] w-full mb-12"})]),e("div",ne,[n(u,{class:"max-w-screen-md h-[100px] w-full mb-12"})])]))}},_e={__name:"cityView",setup(w){return(t,o)=>(i(),d("div",null,[(i(),b(g,null,{default:m(()=>[n(ce)]),fallback:m(()=>[n(ie)]),_:1}))]))}};export{_e as default};
